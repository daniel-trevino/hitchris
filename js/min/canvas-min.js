function calcY(e){var i=calcSlope(viewPort,destiny),t;return t=i*e-i*viewPort.x+viewPort.y}function calcSlope(e,i){return(e.y-i.y)/(e.x-i.x)}function calcMapViewPort(e){var i,t,n;return t=canvas.width/2-e.x,t-=e.x,t/=2,n=e.y-canvas.height/2,n+=canvas.height/4,n=-n,i={x:t,y:n}}var cuernavaca={x:1042,y:1672},norrkoping={x:2788,y:869},stockholm={x:2821,y:847},uppsala={x:2817,y:830},munich={x:2726,y:1133},place=cuernavaca,destiny,viewPort,speed=0;$(window).load(function(){function e(){w._x<destiny.x?(w._x+=speed,w._y=calcY(w._x)):(w._x+=-speed,w._y=calcY(w._x)),Math.round(w._y)==destiny.y&&(speed=0),i(),t(e)}function i(){a.clearRect(0,0,n.width,n.height),a.drawImage(w,w._x,w._y)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,n=document.getElementById("canvas"),a=n.getContext("2d"),o=window.devicePixelRatio||1;a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,n.style.width=n.width+"px",n.style.height=n.height+"px",n.width*=o,n.height*=o;var w=new Image;w.onload=e,viewPort=calcMapViewPort(place),w._x=viewPort.x,w._y=viewPort.y,w.src="/img/map.svg",a.scale(o,o),destiny=calcMapViewPort(uppsala)}),$(window).resize(function(){function e(){w._y+=speed,w._x+=-speed,i(),t(e)}function i(){a.clearRect(0,0,n.width,n.height),a.drawImage(w,w._x,w._y)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,n=document.getElementById("canvas"),a=n.getContext("2d"),o=window.devicePixelRatio||1;a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,n.style.width=n.width+"px",n.style.height=n.height+"px",n.width*=o,n.height*=o;var w=new Image;w.onload=e,viewPort=calcMapViewPort(place),w._x=viewPort.x,w._y=viewPort.y,w.src="/img/map.svg",a.scale(o,o)}),$(window).scroll(function(){var e=$(window).scrollTop()});